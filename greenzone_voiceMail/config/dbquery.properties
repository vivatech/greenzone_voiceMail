#Default operator Id
QUERY_INBOX_USER_ID=select * from (select * from tb_chat_messages where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc
SQL2_MYCHAT_MESSAGE_DETAILS=select * from tb_chat_messages_history_{table_index}  where msisdn ='{msisdn}' and  friendMsisdn='{friendMsisdn}' order by chat_read_date  desc limit 0,8
SQL3_MYFRIENDCHAT_MESSAGE_DETAILS=select * from tb_chat_messages_history_{table_index}  where msisdn ='{friendMsisdn}' and  friendMsisdn='{msisdn}' order by chat_read_date  desc limit 0,8
SQL4_TODAY_USER_ID= select ano.todayUserId, ano.todayMsisdn from tb_chat_today_special_userId_{table_index} ano, tb_subscriptions_{table_index} sub where ano.msisdn = '{msisdn}' and ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and sub.service ='FB' and ano.operator_id='AIRTEL' and sub.status in ('SUBSCRIBED','GRACE','PENDING') order by ano.id  limit 0 , 4
SQL5_INBOX_MESSAGE_DETAILS =  select *from tb_chat_messages where msisdn='{msisdn}'  and friendMsisdn='{friendMsisdn}'order by chat_date
SQL6_SELECT_GENDER = select gender from tb_anonymous_chat_acc_details_{table_index} where  msisdn='{msisdn}'
SQL7_MYCHAT_USER_ID_INBOX=   select fMsisdn, userId as fUserId, chat_date,DATE_FORMAT(chat_date, "%H:%i")as chatTime, substring(message,1,15) as message from ((select friendUserId as userId,friendMsisdn as fMsisdn,message,chat_date ,id from (select * from tb_chat_messages where msisdn='{msisdn}' order by id desc) as t group by friendMsisdn order by id desc ) UNION (select UserId as userId,msisdn as fMsisdn,message,chat_date,id  from (select * from tb_chat_messages where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc)) as p  order by userId,id desc
SQL8_MYCHAT_USER_ID_FROM_HISTORY_TO_OTHERS=select friendMsisdn,friendUserId,substring(message,1,15) as message,chat_read_date,DATE_FORMAT(chat_read_date, "%H:%i") as chatTime from (select *from  tb_chat_messages_history_{table_index} where msisdn='{msisdn}' order by id desc) as t group by friendMsisdn order by id desc
SQL9_MYCHAT_USER_ID_FROM_HISTORY_TO_SELF=select msisdn as fMsisdn,UserId as fUserId,chat_read_date,DATE_FORMAT(chat_read_date, "%H:%i") as chatTime,substring(message,1,15) as message from (select *from  tb_chat_messages_history_{all_table_index} where friendMsisdn='{msisdn}' order by id desc) as t group by msisdn order by id desc
SQL10_CONTACTS_DETAILS =select friend_msisdn as friendMsisdn, friend_userId as friendUserId, Add_friend_date as AddFriendDate,DATE_FORMAT(Add_friend_date, "%H:%i") as AddFriendTime from tb_chat_friend_user_details_{table_index} where msisdn='{msisdn}'
SQL11_GET_USER_ID = select  msisdn as friendMsisdn, userId as friendUserId, gender from tb_anonymous_chat_acc_details_{table_index} where msisdn='{msisdn}'
SQL12_GET_TABLE_INDEX = select table_index from tb_anonymous_chat_username_table_index_mapping where user_id='{userId}'
#SQL13_SEARCH_USER_ID = select ano.msisdn as friendMsidn, ano.userId as friendUserId,ano.gender as gender from tb_anonymous_chat_acc_details_{get_table_index} ano, tb_subscriptions_{get_table_index} sub where ano.msisdn != '{msisdn}'  and ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{get_table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{get_table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{get_table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and userId like '{searchText}%' and sub.service ='FB' and ano.status='Y' and sub.status in ('SUBSCRIBED','GRACE','PENDING') order by ano.id limit 0, 8
SQL13_SEARCH_USER_ID =  select ano.msisdn as friendMsisdn, ano.userId as friendUserId,ano.gender as gender from tb_anonymous_chat_acc_details_{get_table_index} ano  where ano.msisdn != '{msisdn}'  and userId like '{searchText}%' and ano.status='Y' order by ano.id limit 0, 8;
SQL14_USER_PROFILE_INFO= select status,userId,gender from tb_anonymous_chat_acc_details_{table_index} where msisdn='{msisdn}'
#May-20 SQL15_USER_ACCOUNT_INFO= select operator_id,Status,renewal_ts from tb_subscriptions_{table_index} where msisdn='{msisdn}' and service='FB' limit 1
SQL15_USER_ACCOUNT_INFO= select status from gs_subscriber_info where msisdn='{msisdn}'
SQL16_USER_ACCOUNT_CREATE = insert into tb_anonymous_chat_acc_details_{table_index} (msisdn, userId,gender, ageGroup, location, interests, status,operator_id,notification_opt,notification_date,notification_count,activation_date) values ('{msisdn}','{userId}','{gender}','{ageGroup}','','','Y','{operator}','{defaultNotificationOpt}', now(), 0, now());
SQL17_CHECK_MAX_USER_ID = select prefix_name,max_id+1 as maxId from tb_anonymous_chat_user_info where gender ='{gender}' and  operator_id='{operator}' order by max_id limit 1
SQL18_USER_ID_MAPPING = insert into tb_anonymous_chat_username_table_index_mapping (user_id,table_index,operator_id) values('{userId}', '{table_index}','{operator}')
SQL19_UPDATE_MAX_USER_ID = update tb_anonymous_chat_user_info set max_id=max_id+1 where prefix_name='{prefixName}' and operator_id='{operator}'
SQL20_DEFAULT_TODAY_USERID = select ano.userId as todayUserId, ano.msisdn as todayMsisdn from tb_anonymous_chat_acc_details_{table_index} ano, tb_subscriptions_{table_index} sub where ano.msisdn != '{msisdn}' and ano.status='Y' and ano.gender != '{gender}' and  ano.msisdn not in (select friend_msisdn from tb_chat_friend_user_details_{table_index} where msisdn ='{msisdn}') and ano.msisdn not in (select blocked_msisdn from tb_anonymous_chat_block_user_details_{table_index} where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages where msisdn='{msisdn}') and ano.msisdn not in (select friendMsisdn from tb_chat_messages_history_{table_index} where msisdn='{msisdn}') and ano.msisdn = sub.msisdn and sub.service ='FB' and ano.operator_id='AIRTEL' and sub.status in ('SUBSCRIBED','GRACE','PENDING') limit 0 , 4
SQL21_INSERT_CHAT_MESSAGE_INBOX= insert into tb_chat_messages (msisdn,UserId, friendMsisdn,friendUserId,message,operator_id)values('{msisdn}','{userId}','{friendMsisdn}','{friendUserId}','{chatMessage}','{operator}');
SQL22_INSERT_CHAT_MESSAGE_HISTORY= insert into tb_chat_messages_history_{table_index} (msisdn, userId, friendMsisdn,friendUserId, message, chat_read_date,operator_id) values('{msisdn}','{userId}','{friendMsisdn}','{friendUserId}','{chatMessage}',now(),'{operator}');
SQL23_USER_TONE_INFO=select status,calling_party,tone_id from CRBT_SUBS_TONE_PROV_INFO where subscriber_id='{msisdn}' order by tone_type Desc;
SQL24_TONE_PLAYER_DTMF= insert into CRBT_SUBS_TONE_DTMF_INFO (aparty,bparty,tone_id,digits,start_time,end_time,star_to_copy) values ('{aparty}','{bparty}','{tone_id}','{digits}',STR_TO_DATE('{start_time}','%d-%m-%Y %H:%i:%s'),STR_TO_DATE('{end_time}','%d-%m-%Y %H:%i:%s'),'{star_to_copy}');
SQL25_USER_PROFILE_INFO= select subscriber_status,ivr_langId from SUBSCRIBER_PROFILE_DETAILS where subscriber_id='{msisdn}';
SQL26_USER_GIFT_INBOX_CHECK= select gifter_id,tone_id from CRBT_GIFT_INBOX_DETAILS where giftee_id='{msisdn}' and status='Y';
SQL27_INSERT_IVR_LANGUAGE=insert into SUBSCRIBER_PROFILE_DETAILS (subscriber_id,ivr_langId,subscriber_status,ivr_lang_update) values ('{aparty}','{ivrLang}','P',now());
SQL28_UPDATE_SUB_PROFILE= update SUBSCRIBER_PROFILE_DETAILS set subscriber_status='{sub_status}',activation_date=now() where subscriber_id='{aparty}';
SQL29_UPDATE_IVR_LANGUAGE= update SUBSCRIBER_PROFILE_DETAILS set ivr_langId='{ivrLang}',ivr_lang_update=now() where subscriber_id='{aparty}';
SQL30_UPDATE_UNSUB_PROFILE= update SUBSCRIBER_PROFILE_DETAILS set subscriber_status='{sub_status}',deactivate_date=now() where subscriber_id='{aparty}';
SQL31_CAT_SUB_CAT_SONGS_DETAILS = select tone_id from CRBT_IVR_CATEGORY_INFO where cat_id='{categoryId}' and sub_cat_id='{subCategoryId}';
SQL32_INSERT_TONE_PROV_INFO= insert into CRBT_SUBS_TONE_PROV_INFO (subscriber_id,tone_type,tone_type_idx,STATUS,calling_party,tone_id,song_name,tone_activation_date) values ('{aparty}','{toneType}','{toneTypeIdx}','{status}','{callingParty}','{toneId}','{songName}',now());
SQL32_UPDATE_TONE_PRO_INFO= update CRBT_SUBS_TONE_PROV_INFO set tone_id='{toneId}', calling_party='{callingParty}',song_name='{songName}', tone_activation_date=now() where subscriber_id='{aparty}' and tone_type='{toneType}' and tone_type_idx='{toneTypeIdx}'
SQL33_DELETE_ALL_TONE_INFO = delete from CRBT_SUBS_TONE_PROV_INFO where subscriber_id='{aparty}';
SQL34_INSERT_TP_CDR=insert into CRBT_TP_CDR (subscriber_id,calling_party,play_status,tone_type,tone_id,play_start_time,play_end_time) values ('{bparty}','{aparty}','{playStatus}','{toneType}','{toneId}','{playStartTime}','{playEndTime}');
SQL35_SELECT_SONG_NAME_DETAIL = select songname from contentproperties where songid='{toneId}'; 
SQL36_SELECT_CAT_SUBCAT_DETAILS= select songid,songname from contentproperties where cpcategory1='{categoryId}' and cpcategory2='{subCategoryId}' and contentstatus='PUBLISHED' limit {contentCount};
SQL37_INSERT_VSMS_BILLING_CDR=insert into VMAIL_BILLING_CDR(transaction_id,subscriber_id,v_msisdn,interface_id,action,service_id,product_id,is_charging,result,error_code,charging_date,amount) values ('{transactionId}','{aparty}','{vMsisdn}','{interfaceId}','{action}','{serviceId}','{productId}','{isCharging}','{result}','{errorCode}',now(),{amount});
SQL38_INSERT_VSMS_MESSAGE_DETAILS=insert into VMAIL_MESSAGE_DETAILS (subscriber_id,v_msisdn,interface_id,status,duration,send_date,recording_path) values ('{subscriberId}','{vMsisdn}','{interfaceId}','{status}','{duration}',now(),'{recordingPath}');
SQL39_SELECT_VSMS_MESSAGE_DETAILS=select id,subscriber_id,recording_path from VMAIL_MESSAGE_DETAILS where (v_msisdn='{vMsisdn}' or v_msisdn='{zvMsisdn}') and status='{status}' order by send_date desc limit {messageCount};
SQL40_SELECT_BACKUP_VSMS_MESSAGE=select id,subscriber_id, v_msisdn, interface_id, status, duration ,send_date, listening_date, recording_path from VMAIL_MESSAGE_DETAILS where id={voiceMessageId};
SQL41_INSERT_BACKUP_VSMS_MESSAGE=insert into VMAIL_MESSAGE_BACKUP (transaction_id,subscriber_id,v_msisdn,interface_id,status,duration,send_date,listening_date, delete_date,recording_path) values ({transactionId},'{subscriberId}','{vMsisdn}','{interfaceId}','{status}','{duration}','{sendDate}',now(),now(),'{recordingPath}');
SQL42_DELETE_VSMS_MESSAGE_DETAILS=delete from  VMAIL_MESSAGE_DETAILS where id={voiceMessageId};
SQL43_INSERT_IVR_CDR=insert into IVR_CDR_DETAILS (aparty,bparty,reason,duration,last_node,call_start,call_end) values ('{aparty}','{bparty}','{reason}',{duration},'{lastNode}','{callStartTime}','{callEndTime}');
SQL44_SELECT_VOICEMAIL_DETAILS=select id,subscriber_id,duration,send_date,recording_path  from VMAIL_MESSAGE_DETAILS where v_msisdn='{vMsisdn}' order by send_date desc limit {startIdx},{endIdx}
SQL45_SELECT_VOICEMAIL_DETAILS=select id,subscriber_id,duration,send_date,recording_path  from VMAIL_MESSAGE_DETAILS where v_msisdn='{vMsisdn}' and (date(send_date)>='{fromDate}' AND date(send_date)<='{toDate}' ) order by send_date desc limit {startIdx},{endIdx}
SQL46_SELECT_VOICEMAIL_TODAY=select count(1) from IVR_CDR_DETAILS where bparty='{vMsisdn}' and date(call_start)= date(now());
SQL47_SELECT_VOICEMAIL_YESTERDAY=select count(1) from IVR_CDR_DETAILS where bparty='{vMsisdn}' and date(call_start)= date(now()-interval 1 day);
SQL48_SELECT_VOICEMAIL_WEEKLY=select count(1) from IVR_CDR_DETAILS where bparty='{vMsisdn}' and date(call_start)> date(now()-interval 7 day);
SQL49_SELECT_VOICEMAIL_MONTHLY=select count(1) from IVR_CDR_DETAILS where bparty='{vMsisdn}' and date(call_start)> date(now()-interval 30 day);
SQL50_SELCT_VOICEMAIL_MSISDNWISE_COUNT= select count(1) from VMAIL_MESSAGE_DETAILS where subscriber_id='{aparty}' and v_msisdn='{vMsisdn}' and status='A'
SQL51_UPDATE_VOICEMAIL_MESSAGE_READ=update VMAIL_MESSAGE_DETAILS set status='{status}',listening_date=now() where id={messageId}
SQL52_SELECT_VOICEMAIL_LANGUAGE=select ivr_langId from SUBSCRIBER_PROFILE_DETAILS where subscriber_id='{vMsisdn}';
